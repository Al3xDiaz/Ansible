version: '3.4'
services:
    ansible:
        environment:
            - HOST_USER=${USER}
        container_name: ansible
        image: custom-ansible
        build: 
            context: .
            dockerfile: ./ansible/dockerfile
        volumes: 
            - "./ansible/playbooks:/home/ansible/playbooks"
            - "./ansible/outputs:/home/ansible/outputs"
            - "./vars/:/home/ansible/vars/"
            - "./ansible/ssh-keys/:/home/ansible/ssh-keys/"
            - "./ansible/inventory:/home/ansible/inventory"
            - "./setup.sh:/home/ansible/setup.sh"