version: '3.9'
services:
  ansible:
    extra_hosts:
      - "host-machine-1:192.168.1.16"
      - "host-machine-2:192.168.1.16"
    image: custom-ansible
    build: 
      context: .
      dockerfile: ./ansible/dockerfile
    volumes:  
      - ~/container_home:/root/.ssh/
      - ~/.ssh/:/home/user_keys
      - ./ansible/:/root/ansible/
      - ansible_home:/root/
    command: ./ansible-test.sh
    tty: true
volumes:
  inventory:
  ansible_home: